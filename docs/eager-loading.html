<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>checkbox</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
        <link rel="stylesheet" type="text/css" href="../src/css/all.css">
        <script src="../checkBox.js"></script>        
    </head>
    
    <body>
        <section class="side-bar">
          <span class="close flex mid">&times;</span>
          <div class="side-bar-fit"></div>
        </section>
        <section class="bc-deeper-blue">

            <div class="" style="font-size: 1.2em;"> <br>
                <h1 style="color:#51ceff">CheckBox.js</h1> <br>
                <h4 style="color:#51ceff">Eager Loading (Toggle)</h4> <br>
            </div>
            
            <div class="">
              Eager loading is necessary in situations where we need to preload a toggle 
              event. From the previous tutorials, we have already seen the usage of the
              <code class="c-note bc">init</code> callback option or the <code class="c-note bc">data-init</code> 
              callback attribute. Also, we have learnt about the <code class="c-note bc">toggle</code> callback option or 
              <code class="c-note bc">data-func</code> callback attribute. We can easily combine these features to create a 
              smart eager loading for the custom checkbox toggling activity. The sample below shows how to achieve this :
            </div> <br>
            
            <!-- checkbox -->
            <div class="code">
                <div class="flex">
                    <div class="code-x">
                        <span class="code-btn" rel="html">HTML</span>
                        <span class="code-btn" rel="js">JS</span>
                        <span class="code-btn" rel="view"><i class="bi-window"></i></span>
                    </div>
                    <div class="">
                        <span class="copy-btn"><i class="bi-clipboard"></i></span>
                    </div>
                </div>
<pre class="html active">
<span class="tag">&lt;div <span>checkbox=""</span>&gt;</span>
  <span class="tag">&lt;div <span>marker=""</span>&gt;&lt;/div&gt;</span> 
  <span class="tag">&lt;div <span>marker=""</span>&gt;&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;input <span>type="<span>checkbox</span>" value="<span>foo</span>"</span>&gt; &lt;br&gt;</span> 
<span class="tag">&lt;div <span>class="<span>response</span>"</span>&gt;&lt;/div&gt;</span>
</pre>
<pre class="js">
<span class="tag">&lt;script&gt;</span>
new <span class="func">CheckBox(</span>{
    <span class="key">init</span>: <span class="func">function(</span><span class="arg">checkbox</span><span class="func">)</span> {
        
        let <span class="var">value</span> = <span class="arg">checkbox</span>.value;
        let <span class="var">textField</span> = document.<span class="func">querySelector(<span class="string">".response"</span>)</span>;

        if( <span class="arg">checkbox</span>.checked ) {
            <span class="var">textField</span>.<span class="func">innerHTML = </span>`<span class="string">checkbox <span class="braces">${</span><span class="var">value</span><span class="braces">}</span> is: checked</span><span class="func"></span>`
        } else {
            <span class="var">textField</span>.<span class="func">innerHTML = </span>`<span class="string">checkbox <span class="braces">${</span><span class="var">value</span><span class="braces">}</span> is: unchecked</span><span class="func"></span>`
        }

    },
    <span class="key">toggle</span>: <span class="func">function(</span><span class="arg">checkbox</span><span class="func">)</span> {
        
        <span class="arg">checkbox</span>.<span class="func">init(<span class="arg">checkbox</span>)</span>;

    }
}<span class="func">)</span>;
<span class="tag">&lt;/script&gt;</span>    
</pre>
<pre class="view">
                 <div class="checkbox-field flex mid-v">
                  <div>
                    <div checkers data-size="20px"> 
                      <div marker="" style="background-color:white"></div>
                      <div marker="" style="background-color:lime"></div>
                    </div>
                    <input type="checkbox" value="foo"> 
                  </div>
                  <div class="">
                    &nbsp; <span class="response"></span>
                  </div>
                </div> 
</pre>
            </div> <br>           
                     
            
            <div class="">
              From the javascript above, we can see that the <code class="c-attr">checkbox</code> argument supplied into the <code class="c-bool">toggle()</code> callback option has access to the <code class="c-bool">init()</code> 
              callback. This makes it easier to run the <code class="c-bool">init()</code> within the <code class="c-bool">toggle()</code> function rather than redefining it. This 
              means that <code class="c-bool">init()</code> function will first run when the page loads and it will continue to run when the checkbox is toggled. This is also why the message in the response code screen above displays earlier 
              before the checkbox is being clicked.
            </div> <br>
            
            <div class="nav-pane">
              <a href="../docs/toggle-event.html" class="nav-btn-lt">
                <i class="bi-arrow-left-circle"></i> 
              </a> 
              
              <a href="../docs/callback-methods.html" class="nav-btn-rt">
                <i class="bi-arrow-right-circle"></i> callback methods
              </a> 
            </div><br><br><br>

        </section>
        
        <script src="../src/js/docs.js"></script>
        <script src="../src/js/navscript.js"></script>
        
        <script>
          let checkers =  new CheckBox(false);

          checkers.check({
             
            target: '[checkers]',
            flip: true,
            init: (checkbox) => {
               let responseField = document.querySelector('.response');
  
               responseField.innerHTML = `checkbox <span class="c-var">${checkbox.value}</span> is: `+(checkbox.checked ? 'checked' : 'unchecked');              
            },
            toggle: function(checkbox){
              
              checkbox.init(checkbox);
             
            }
            
          });

        </script>
    </body>
</html>