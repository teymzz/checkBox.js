<html lang="en">
  
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>checkbox</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" type="text/css" href="../src/css/all.css">
    <script src="../checkBox.js"></script>   
    <style>
        [checkers] {
            width: fit-content;
            border-radius: 5px;    
            border: solid; 
            padding: 4px;    
        }

        [checkers] > [marker] {
            width: 20px;
            height: 20px;    
            background-color: transparent;
            transition: width .5s ease-in-out, 
                        background-color .5s ease-in-out;
        }

        /* apply this when unchecked */
        .bar[checkers] > [marker] { 
            width: 30px;
            background-color: red;
        }

        /* apply this when checked */
        .baz[checkers] > [marker] {
            width: 50px;
            background-color: lime;
        }
    </style>    
  </head>
  <body>
        <section class="side-bar">
          <span class="close flex mid">&times;</span>
          <div class="side-bar-fit"></div>
        </section>
        <section class="bc-deeper-blue">
            <div class="" style="font-size: 1.2em;"> <br>
                <h1 style="color:#51ceff">CheckBox.js</h1> <br>
                <h4 style="color:#51ceff">Injecting Attributes</h4> <br>
            </div>
        
            <div class="">
                Earlier, we have seen how to toggle an attribute's value globally using the <code class="c-bool bc">assign</code> option. 
                The checkbox plugin however provides an extra feature for injecting a default value into destination values 
                when toggling attribute's values. This feature is mostly useful when assigning values that are mostly constant. In this case, rather 
                than repeating the same value, we can easily reduce the html structure smartly by using the plugin's
                <code class="c-bool bc">alter</code> option. Consider the sample below:
            </div> <br>
      
            
            <div class="code">
                <div class="flex">
                    <div class="code-x">
                        <span class="code-btn" rel="html">HTML</span>
                        <span class="code-btn" rel="js">JS</span>
                    </div>
                    <div class="">
                        <span class="copy-btn"><i class="bi-clipboard"></i></span>
                    </div>
                </div>
<pre class="html active"><span class="tag">&lt;div <span class="func">checkbox data-names="<span class="var">foo|bar baz</span>" rel="<span>box</span>"</span>&gt;</span>
  <span class="tag">&lt;div <span class="func">marker=""</span>&gt;&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;input <span class="func">type="<span class="var">checkbox</span>"</span>&gt;</span>
</pre>
<pre class="js">
<span class="var">let</span> checkbox = <span class="var">new</span> <span class="func">CheckBox(<span class="bool">false</span>)</span>;

checkbox.<span class="func">check(<span class="braces">{

    <span class="key">assign</span>: {
        <span class="key">attr</span>: [<span class="string">'data-names'</span>, <span class="string">'rel'</span>, <span class="string">'checked'</span>],
    },
    <span class="key">toggle</span>: <span class="func">(<span class="arg">e</span>) => </span>{
        if <span class="func">(<span class="arg">e.<span class="val">checked</span></span>)</span> {    

            <span class="var">let</span> <span class="val">dataNames</span> = <span class="arg">e</span>.<span class="val">target</span>.<span class="func">getAttribute(<span class="string">"data-names"</span>)</span>;
            
            <span class="comment">/*get checked values (i.e bar baz)*/</span>
            <span class="var">let</span> <span class="val">checkedValues</span> = <span class="var">dataNames</span>.<span class="func">split(<span class="string">"|"</span>)</span><span class="val">[<span class="bool">1</span>]</span>;
            
            <span class="comment">/*add extra attribute to checked values*/</span>
            <span class="var">checkedValues</span> += <span class="string">" box animate"</span>;
            <span class="arg">e</span>.<span class="val">target</span>.<span class="func">setAttribute(<span class="string">"rel", <span class="var">checkedValues</span></span>)</span>;
            
        } else {
            <span class="arg">e</span>.<span class="val">target</span>.classList.<span class="func">remove(<span class="string">"animate"</span>)</span>;
            <span class="var">let</span> <span class="val">checkedValues</span> = <span class="var">dataNames</span>.<span class="func">split(<span class="string">"|"</span>)</span><span class="val">[<span class="bool">0</span>]</span>;
            <span class="var">checkedValues</span> += <span class="string">" box"</span>;
            
            <span class="arg">e</span>.<span class="val">target</span>.<span class="func">setAttribute(<span class="string">"rel", <span class="var">checkedValues</span></span>)</span>;
        }
    }

}</span>)</span>;
</pre>
            </div> <br>     
      
            <div class="">
                From the sample javascript above, when the checkbox is checked, the <code class="bc c-var">"bar baz"</code> value of the <code class="c-note bc">data-names</code> attribute 
                will be toggled into the <code class="c-note bc">rel</code> attribute of the same checkbox. Similarly, when the checkbox is unchecked, the 
                <code class="c-var bc">"foo"</code> value will be toggled into the <code class="c-note bc">class</code> attribute. However, the javascript's <code class="c-bool bc">toogle()</code> 
                callback function assigns an extra <code class="c-var bc">"animate"</code> value to the <code class="c-note bc">rel</code> attribute only when the checkbox is checked. This additional adding of 
                <code class="c-var bc">animate</code> attribute in the javascript section takes a bit longer and we have to redefine the <code class="c-var bc">"box"</code> value so it doesn't get overridden. 
                The checkbox plugin provides an easier way to handle this which can be seen below :
            </div> <br>

                        
            <div class="code">
                <div class="flex">
                    <div class="code-x">
                        <span class="code-btn" rel="html">HTML</span>
                        <span class="code-btn" rel="js">JS</span>
                    </div>
                    <div class="">
                        <span class="copy-btn"><i class="bi-clipboard"></i></span>
                    </div>
                </div>
<pre class="html active"><span class="tag">&lt;div <span class="func">checkbox data-names="<span class="var">foo|bar baz</span>" rel="<span>box</span>"</span>&gt;</span>
  <span class="tag">&lt;div <span class="func">marker=""</span>&gt;&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;input <span class="func">type="<span class="var">checkbox</span>"</span>&gt;</span>
</pre>
<pre class="js">
<span class="var">let</span> checkbox = <span class="var">new</span> <span class="func">CheckBox(<span class="bool">false</span>)</span>;

checkbox.<span class="func">check({

    <span class="key">assign</span>: {
        <span class="key">attr</span>: [<span class="string">'data-names'</span>, <span class="string">'class'</span>, <span class="string">'checked'</span>],
        <span class="key">alter</span>: <span class="func">(<span class="arg">dataNames</span>) => </span>{
            return <span class="arg">dataNames</span>.<span class="func">map( <span class="arg">el</span> => <span class="string">'animate'</span> + <span class="arg">el</span> <span class="func">)</span>;</span>
        }
    }

})</span>;
</pre>
            </div> <br> 

            <div class="">
                From the sample above, the <code class="c-bool bc">alter</code> option will easily modify the values by injecting an extra <code class="c-var bc">"animate"</code> value to the destination values <code class="c-var bc">"bar baz"</code> before it is finally added 
                to the <code class="c-note bc">rel</code> destination attribute when it is <i>checked</i>. 
                This injected value along with other values will also be replaced with <code class="c-var bc">"foo"</code> when the checkbox <i>unchecked</i> while the default value <code class="c-var bc">box</code> will be kept. 
                The removal or addition of the injected value is however dependent on the modifier option (e.g <code class="c-string bc">"checked"</code>) applied. 
                For example, if the modifier was set as <code class="c-note bc">"unchecked"</code>, then <code class="c-var bc">"animate"</code> will be injected when the checkbox is <i>unchecked</i> while it will be removed when the checkbox is <i>checked</i>. 
                This makes our code concise and easier to maintain.
            </div> <br>

            <div class="nav-pane">
                <a href="../docs/toggling-attribute-advanced.html" class="nav-btn-lt">
                    <i class="bi-arrow-left-circle"></i> 
                </a> 
                
                <a href="../docs/adding-labels.html" class="nav-btn-rt">
                    <i class="bi-arrow-right-circle"></i> adding labels
                </a> 
            </div><br><br><br>
        </section>

        <script src="../src/js/docs.js"></script>
        <script src="../src/js/navscript.js"></script>
        <script>
            let checkers =  new CheckBox(false);
  
            checkers.check({
               
              target: '[checkers]',
              flip: true
              
            });
        </script>
    </body>
</html>

